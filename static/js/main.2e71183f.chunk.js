(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var c=n(24),a=(n(33),n(34),n(6)),s=n(3),r=n(1),l=function(){return Object(r.jsx)("h1",{className:"title",children:"Home Page"})},i=n(4),o=n(0),j=n(7),d=n(8),u=n.n(d),b=["16","17","18","19","20"],h=function(e){return e.All="all",e.Male="m",e.Female="f",e}({}),x=function(e){var t,n=e.query,c=e.centuries,s=Object(a.d)(),l=Object(i.a)(s,2),o=l[0],d=l[1],x=null!==(t=o.get("sex"))&&void 0!==t?t:h.All,m=function(e){var t=new URLSearchParams(o),n=null!==c&&void 0!==c&&c.includes(e)?c.filter((function(t){return t!==e})):[].concat(Object(j.a)(null!==c&&void 0!==c?c:[]),[e]);return t.delete("centuries"),n.forEach((function(e){return t.append("centuries",e)})),t},O=function(e){var t=new URLSearchParams(o);return t.delete("sex"),"all"!==e&&t.append("sex",e),t};var p=Object.entries(h);return Object(r.jsxs)("nav",{className:"panel",children:[Object(r.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(r.jsx)("p",{className:"panel-tabs","data-cy":"SexFilter",children:p.map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.jsx)(a.b,{className:u()({"is-active":c!==x}),to:{pathname:"",search:O(c).toString()},children:n},n)}))}),Object(r.jsx)("div",{className:"panel-block",children:Object(r.jsxs)("p",{className:"control has-icons-left",children:[Object(r.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:null!==n&&void 0!==n?n:"",onChange:function(e){var t=new URLSearchParams(o);t.set("query",e.target.value),d(t)}}),Object(r.jsx)("span",{className:"icon is-left",children:Object(r.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(r.jsx)("div",{className:"panel-block",children:Object(r.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(r.jsx)("div",{className:"level-left",children:b.map((function(e){return Object(r.jsx)(a.b,{"data-cy":"century",className:u()("button","mr-1",{"is-info":null===c||void 0===c?void 0:c.includes(e)}),to:{pathname:"",search:m(e).toString()},children:e},"".concat(Date.now(),"_").concat(e))}))}),Object(r.jsx)("div",{className:"level-right ml-4",children:Object(r.jsx)(a.b,{"data-cy":"centuryALL",className:u()("button","is-success",{"is-outlined":null===c||void 0===c?void 0:c.length}),to:{pathname:"",search:function(){var e=new URLSearchParams(o);return e.delete("centuries"),e}().toString()},children:"All"})})]})}),Object(r.jsx)("div",{className:"panel-block",children:Object(r.jsx)(a.b,{className:u()("button","is-link","is-outlined",{"is-fullwidth":o}),to:"#/people",children:"Reset all filters"})})]})},m=(n(36),function(){return Object(r.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(r.jsx)("div",{className:"Loader__content"})})}),O=function(e){return e.Name="name",e.Sex="sex",e.Born="born",e.Died="died",e}({}),p=function(){var e=Object(a.d)(),t=Object(i.a)(e,1)[0],n=t.get("sort"),c=t.get("order"),s=function(e){return e!==n||c?e===n&&c?"fas fa-sort-down":"fas fa-sort":"fas fa-sort-up"},l=function(e){var a=new URLSearchParams(t);return e?a.set("sort",e):a.delete("sort"),e!==n||c?a.delete("order"):a.set("order","desc"),e===n&&c&&(a.delete("sort"),a.delete("order")),a};return Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:Object(r.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(r.jsx)(a.b,{to:{pathname:"",search:l(O.Name).toString()},children:Object(r.jsx)("span",{className:"icon",children:Object(r.jsx)("i",{className:s(O.Name)})})})]})}),Object(r.jsx)("th",{children:Object(r.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(r.jsx)(a.b,{to:{pathname:"",search:l(O.Sex).toString()},children:Object(r.jsx)("span",{className:"icon",children:Object(r.jsx)("i",{className:s(O.Sex)})})})]})}),Object(r.jsx)("th",{children:Object(r.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(r.jsx)(a.b,{to:{pathname:"",search:l(O.Born).toString()},children:Object(r.jsx)("span",{className:"icon",children:Object(r.jsx)("i",{className:s(O.Born)})})})]})}),Object(r.jsx)("th",{children:Object(r.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(r.jsx)(a.b,{to:{pathname:"",search:l(O.Died).toString()},children:Object(r.jsx)("span",{className:"icon",children:Object(r.jsx)("i",{className:s(O.Died)})})})]})}),Object(r.jsx)("th",{children:"Mother"}),Object(r.jsx)("th",{children:"Father"})]})},f=function(e){var t=e.person;return Object(r.jsx)(a.b,{to:"/people/".concat(t.slug),className:u()({"has-text-danger":"f"===t.sex}),children:t.name})},v=function(e){var t=e.person,n=e.selectedSlug,c=t.slug,a=t.sex,s=t.born,l=t.died,i=t.mother,o=t.motherName,j=t.father,d=t.fatherName;return Object(r.jsxs)("tr",{className:u()({"has-background-warning":c===n}),"data-cy":"person",children:[Object(r.jsx)("td",{children:Object(r.jsx)(f,{person:t})}),Object(r.jsx)("td",{children:a}),Object(r.jsx)("td",{children:s}),Object(r.jsx)("td",{children:l}),Object(r.jsx)("td",{className:u()({"has-text-danger":i}),children:i?Object(r.jsx)(f,{person:i}):null!==o&&void 0!==o?o:"-"}),Object(r.jsx)("td",{children:j?Object(r.jsx)(f,{person:j}):null!==d&&void 0!==d?d:"-"})]})},N=function(e){var t=e.people,n=e.selectedSlug;return Object(r.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(r.jsx)("thead",{children:Object(r.jsx)(p,{})}),Object(r.jsx)("tbody",{children:t.map((function(e){return Object(r.jsx)(v,{person:e,selectedSlug:n},e.slug)}))})]})};var g=n(22),w=function(e){return e.Asc="asc",e.Desc="desc",e}({});function S(e,t){return e.find((function(e){return e.name===t}))}function y(e,t){var n,c,a=null!==(n=null===t||void 0===t||null===(c=t.trim())||void 0===c?void 0:c.toLowerCase())&&void 0!==n?n:"";return e.toLowerCase().includes(a)}function L(e,t,n,c){return t||n||c?e.filter((function(e){var a,s;return(y(e.name,t)||y(null!==(a=e.fatherName)&&void 0!==a?a:"",t)||y(null!==(s=e.motherName)&&void 0!==s?s:"",t))&&function(e,t){return t===h.All||t===e.sex}(e,n)&&function(e,t){return null===t||void 0===t||!t.length||t.includes(Math.floor(e.born/100).toString())}(e,c)})):e}var k=function(){var e,t,n,c=Object(o.useState)([]),l=Object(i.a)(c,2),d=l[0],u=l[1],b=Object(o.useState)(!0),p=Object(i.a)(b,2),f=p[0],v=p[1],y=Object(o.useState)(""),k=Object(i.a)(y,2),D=k[0],P=k[1],A=Object(a.d)(),C=Object(i.a)(A,1)[0],F=C.get("sort"),R=C.get("order"),B=Object(s.r)().slug,_=!f&&!!d.length,U=!f&&!D&&!d.length;Object(o.useEffect)((function(){setTimeout((function(){fetch("https://mate-academy.github.io/react_people-table/api/people.json").then((function(e){return e.json()})).then((function(e){return e})).then((function(e){u(function(e){return null===e||void 0===e?void 0:e.map((function(t){return Object(g.a)(Object(g.a)({},t),{},{mother:S(e,t.motherName),father:S(e,t.fatherName)})}))}(e))})).catch((function(){return P("Something went wrong")})).finally((function(){return v(!1)}))}),1e3)}),[]);var q=null!==(e=C.get("sex"))&&void 0!==e?e:"",E=null!==(t=C.get("query"))&&void 0!==t?t:null,M=C.getAll("centuries")||[],T=function(e,t,n){return Object(j.a)(e).sort((function(e,c){return t===O.Name?n===w.Desc?-1*e.name.localeCompare(c.name):e.name.localeCompare(c.name):t===O.Sex?n===w.Desc?-1*e.sex.localeCompare(c.sex):e.sex.localeCompare(c.sex):t===O.Died?n===w.Desc?c.died-e.died:e.died-c.died:t===O.Born?n===w.Desc?c.born-e.born:e.born-c.born:0}))}(L(d,E,null!==(n=Object.values(h).find((function(e){return e===q})))&&void 0!==n?n:h.All,M),F,R);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{className:"title",children:"People Page"}),Object(r.jsx)("div",{className:"block",children:Object(r.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(r.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:!f&&Object(r.jsx)(x,{query:E,centuries:M})}),Object(r.jsx)("div",{className:"column",children:Object(r.jsxs)("div",{className:"box table-container",children:[f&&Object(r.jsx)(m,{}),_&&Object(r.jsx)(N,{people:T,selectedSlug:B}),U&&Object(r.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),!f&&!T.length&&Object(r.jsx)("p",{children:"There are no people matching the current search criteria"}),D&&Object(r.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:D})]})})]})})]})},D=(n(37),function(e){var t=e.isActive;return u()("navbar-item",{"has-background-grey-lighter":t})}),P=function(){return Object(r.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("div",{className:"navbar-brand",children:[Object(r.jsx)(a.c,{className:D,to:"/",children:"Home"}),Object(r.jsx)(a.c,{className:D,to:"/people",children:"People"})]})})})},A=function(){return Object(r.jsxs)("div",{"data-cy":"app",children:[Object(r.jsx)(P,{}),Object(r.jsx)("main",{className:"section",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)(s.b,{})})})]})},C=function(){return Object(r.jsx)("h1",{className:"title",children:"Page not found"})},F=function(){return Object(r.jsx)(a.a,{children:Object(r.jsxs)(s.e,{children:[Object(r.jsx)(s.c,{path:"/home",element:Object(r.jsx)(s.a,{to:"/",replace:!0})}),Object(r.jsxs)(s.c,{path:"/",element:Object(r.jsx)(A,{}),children:[Object(r.jsx)(s.c,{index:!0,element:Object(r.jsx)(l,{})}),Object(r.jsx)(s.c,{path:"/people/:slug?",element:Object(r.jsx)(k,{})}),Object(r.jsx)(s.c,{path:"*",element:Object(r.jsx)(C,{})})]})]})})},R=document.getElementById("root");Object(c.createRoot)(R).render(Object(r.jsx)(F,{}))}},[[38,1,2]]]);
//# sourceMappingURL=main.2e71183f.chunk.js.map