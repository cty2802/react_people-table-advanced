(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(25),a=(n(34),n(35),n(5)),s=n(3),r=n(1),l=function(){return Object(r.jsx)("h1",{className:"title",children:"Home Page"})},i=n(4),o=n(0),j=n(7),d=n(8),u=n.n(d),b=["16","17","18","19","20"],h=100,x=function(e){return e.All="all",e.Male="m",e.Female="f",e}({}),m=function(e){var t,n=e.query,c=e.centuries,s=Object(a.d)(),l=Object(i.a)(s,2),o=l[0],d=l[1],h=null!==(t=o.get("sex"))&&void 0!==t?t:x.All,m=function(e){var t=new URLSearchParams(o),n=null!==c&&void 0!==c&&c.includes(e)?c.filter((function(t){return t!==e})):[].concat(Object(j.a)(null!==c&&void 0!==c?c:[]),[e]);return t.delete("centuries"),n.forEach((function(e){return t.append("centuries",e)})),t},O=function(e){var t=new URLSearchParams(o);return t.delete("sex"),"all"!==e&&t.append("sex",e),t};var p=Object.entries(x);return Object(r.jsxs)("nav",{className:"panel",children:[Object(r.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(r.jsx)("p",{className:"panel-tabs","data-cy":"SexFilter",children:p.map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.jsx)(a.b,{className:u()({"is-active":c!==h}),to:{pathname:"",search:O(c).toString()},children:n},n)}))}),Object(r.jsx)("div",{className:"panel-block",children:Object(r.jsxs)("p",{className:"control has-icons-left",children:[Object(r.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:null!==n&&void 0!==n?n:"",onChange:function(e){var t=new URLSearchParams(o);t.set("query",e.target.value),d(t)}}),Object(r.jsx)("span",{className:"icon is-left",children:Object(r.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(r.jsx)("div",{className:"panel-block",children:Object(r.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(r.jsx)("div",{className:"level-left",children:b.map((function(e){return Object(r.jsx)(a.b,{"data-cy":"century",className:u()("button","mr-1",{"is-info":null===c||void 0===c?void 0:c.includes(e)}),to:{pathname:"",search:m(e).toString()},children:e},"".concat(Date.now(),"_").concat(e))}))}),Object(r.jsx)("div",{className:"level-right ml-4",children:Object(r.jsx)(a.b,{"data-cy":"centuryALL",className:u()("button","is-success",{"is-outlined":null===c||void 0===c?void 0:c.length}),to:{pathname:"",search:function(){var e=new URLSearchParams(o);return e.delete("centuries"),e}().toString()},children:"All"})})]})}),Object(r.jsx)("div",{className:"panel-block",children:Object(r.jsx)(a.b,{className:u()("button","is-link","is-outlined",{"is-fullwidth":o}),to:"#/people",children:"Reset all filters"})})]})},O=(n(37),function(){return Object(r.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(r.jsx)("div",{className:"Loader__content"})})}),p=function(e){return e.Name="name",e.Sex="sex",e.Born="born",e.Died="died",e}({}),f=n(23),v=function(e){return e.Asc="asc",e.Desc="desc",e}({});function N(e,t){return e.find((function(e){return e.name===t}))}function g(e,t,n){return u()("fas",{"fa-sort-up":e===t&&!n},{"fa-sort-down":e===t&&n},{"fa-sort":e})}var w=function(){var e=Object(a.d)(),t=Object(i.a)(e,1)[0],n=t.get("sort"),c=t.get("order"),s=function(e){var a=new URLSearchParams(t);return e?a.set("sort",e):a.delete("sort"),e!==n||c?a.delete("order"):a.set("order","desc"),e===n&&c&&(a.delete("sort"),a.delete("order")),a};return Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:Object(r.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(r.jsx)(a.b,{to:{pathname:"",search:s(p.Name).toString()},children:Object(r.jsx)("span",{className:"icon",children:Object(r.jsx)("i",{className:g(p.Name,n,c)})})})]})}),Object(r.jsx)("th",{children:Object(r.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(r.jsx)(a.b,{to:{pathname:"",search:s(p.Sex).toString()},children:Object(r.jsx)("span",{className:"icon",children:Object(r.jsx)("i",{className:g(p.Sex,n,c)})})})]})}),Object(r.jsx)("th",{children:Object(r.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(r.jsx)(a.b,{to:{pathname:"",search:s(p.Born).toString()},children:Object(r.jsx)("span",{className:"icon",children:Object(r.jsx)("i",{className:g(p.Born,n,c)})})})]})}),Object(r.jsx)("th",{children:Object(r.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(r.jsx)(a.b,{to:{pathname:"",search:s(p.Died).toString()},children:Object(r.jsx)("span",{className:"icon",children:Object(r.jsx)("i",{className:g(p.Died,n,c)})})})]})}),Object(r.jsx)("th",{children:"Mother"}),Object(r.jsx)("th",{children:"Father"})]})},S=function(e){var t=e.person,n=Object(a.d)(),c=Object(i.a)(n,1)[0];return Object(r.jsx)(a.b,{to:{pathname:"/people/".concat(t.slug),search:c.toString()},className:u()({"has-text-danger":"f"===t.sex}),children:t.name})},y=function(e){var t=e.person,n=e.selectedSlug,c=t.slug,a=t.sex,s=t.born,l=t.died,i=t.mother,o=t.motherName,j=t.father,d=t.fatherName;return Object(r.jsxs)("tr",{className:u()({"has-background-warning":c===n}),"data-cy":"person",children:[Object(r.jsx)("td",{children:Object(r.jsx)(S,{person:t})}),Object(r.jsx)("td",{children:a}),Object(r.jsx)("td",{children:s}),Object(r.jsx)("td",{children:l}),Object(r.jsx)("td",{className:u()({"has-text-danger":i}),children:i?Object(r.jsx)(S,{person:i}):null!==o&&void 0!==o?o:"-"}),Object(r.jsx)("td",{children:j?Object(r.jsx)(S,{person:j}):null!==d&&void 0!==d?d:"-"})]})},L=function(e){var t=e.people,n=e.selectedSlug;return Object(r.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(r.jsx)("thead",{children:Object(r.jsx)(w,{})}),Object(r.jsx)("tbody",{children:t.map((function(e){return Object(r.jsx)(y,{person:e,selectedSlug:n},e.slug)}))})]})};function k(e,t){var n,c,a=null!==(n=null===t||void 0===t||null===(c=t.trim())||void 0===c?void 0:c.toLowerCase())&&void 0!==n?n:"";return e.toLowerCase().includes(a)}function D(e,t,n,c){return t||n||c?e.filter((function(e){var a,s;return(k(e.name,t)||k(null!==(a=e.fatherName)&&void 0!==a?a:"",t)||k(null!==(s=e.motherName)&&void 0!==s?s:"",t))&&function(e,t){return t===x.All||t===e.sex}(e,n)&&function(e,t){return!(null!==t&&void 0!==t&&t.length)||t.includes(Math.floor(e.born/h).toString())}(e,c)})):e}var P=function(){var e,t,n,c=Object(o.useState)([]),l=Object(i.a)(c,2),d=l[0],u=l[1],b=Object(o.useState)(!0),h=Object(i.a)(b,2),g=h[0],w=h[1],S=Object(o.useState)(""),y=Object(i.a)(S,2),k=y[0],P=y[1],A=Object(a.d)(),C=Object(i.a)(A,1)[0],F=C.get("sort"),R=C.get("order"),B=Object(s.r)().slug,_=!g&&!!d.length,U=!g&&!k&&!d.length;Object(o.useEffect)((function(){setTimeout((function(){fetch("https://mate-academy.github.io/react_people-table/api/people.json").then((function(e){return e.json()})).then((function(e){return e})).then((function(e){u(function(e){return null===e||void 0===e?void 0:e.map((function(t){return Object(f.a)(Object(f.a)({},t),{},{mother:N(e,t.motherName),father:N(e,t.fatherName)})}))}(e))})).catch((function(){return P("Something went wrong")})).finally((function(){return w(!1)}))}),1e3)}),[]);var q=null!==(e=C.get("sex"))&&void 0!==e?e:"",E=null!==(t=C.get("query"))&&void 0!==t?t:null,M=C.getAll("centuries")||[],T=function(e,t,n){return Object(j.a)(e).sort((function(e,c){switch(t){case p.Name:return n===v.Desc?-1*e.name.localeCompare(c.name):e.name.localeCompare(c.name);case p.Sex:return n===v.Desc?-1*e.sex.localeCompare(c.sex):e.sex.localeCompare(c.sex);case p.Died:return n===v.Desc?c.died-e.died:e.died-c.died;case p.Born:return n===v.Desc?c.born-e.born:e.born-c.born;default:return 0}}))}(D(d,E,null!==(n=Object.values(x).find((function(e){return e===q})))&&void 0!==n?n:x.All,M),F,R);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{className:"title",children:"People Page"}),Object(r.jsx)("div",{className:"block",children:Object(r.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(r.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:!g&&Object(r.jsx)(m,{query:E,centuries:M})}),Object(r.jsx)("div",{className:"column",children:Object(r.jsxs)("div",{className:"box table-container",children:[g&&Object(r.jsx)(O,{}),g||T.length?_&&Object(r.jsx)(L,{people:T,selectedSlug:B}):Object(r.jsx)("p",{children:"There are no people matching the current search criteria"}),U&&Object(r.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),k&&Object(r.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:k})]})})]})})]})},A=(n(38),function(e){var t=e.isActive;return u()("navbar-item",{"has-background-grey-lighter":t})}),C=function(){return Object(r.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("div",{className:"navbar-brand",children:[Object(r.jsx)(a.c,{className:A,to:"/",children:"Home"}),Object(r.jsx)(a.c,{className:A,to:"/people",children:"People"})]})})})},F=function(){return Object(r.jsxs)("div",{"data-cy":"app",children:[Object(r.jsx)(C,{}),Object(r.jsx)("main",{className:"section",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)(s.b,{})})})]})},R=function(){return Object(r.jsx)("h1",{className:"title",children:"Page not found"})},B=function(){return Object(r.jsx)(a.a,{children:Object(r.jsxs)(s.e,{children:[Object(r.jsx)(s.c,{path:"/home",element:Object(r.jsx)(s.a,{to:"/",replace:!0})}),Object(r.jsxs)(s.c,{path:"/",element:Object(r.jsx)(F,{}),children:[Object(r.jsx)(s.c,{index:!0,element:Object(r.jsx)(l,{})}),Object(r.jsx)(s.c,{path:"/people/:slug?",element:Object(r.jsx)(P,{})}),Object(r.jsx)(s.c,{path:"*",element:Object(r.jsx)(R,{})})]})]})})},_=document.getElementById("root");Object(c.createRoot)(_).render(Object(r.jsx)(B,{}))}},[[39,1,2]]]);
//# sourceMappingURL=main.9f22e7c1.chunk.js.map